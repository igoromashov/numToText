<!DOCTYPE html>
<html>
  <head>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <script src="https://snipp.ru/cdn/jquery/2.1.1/jquery.min.js"></script>
    <script src="./numToText.js"></script>
    <title>Numbers to text</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body style="background-color: #2b2b2b; color: rgb(245, 245, 245)">
    <div class="settings">
      <svg
        id="nigthLogo"
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        fill="currentColor"
        class="bi bi-moon-fill logoDN"
        viewBox="0 0 16 16"
        onclick="{
          document.getElementById('nigthLogo').style.display = 'none';
          document.getElementById('dayLogo').style.display = 'block';
          document.getElementById('mainContainer').className = 'day';
          document.getElementById('alert').className = 'day';
          document.querySelector('body').style.backgroundColor = 'rgb(245, 245, 245)'
        }"
      >
        <path
          d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"
        />
      </svg>
      <svg
        id="dayLogo"
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        fill="currentColor"
        class="bi bi-brightness-high-fill logoDN"
        viewBox="0 0 16 16"
        onclick="{
          document.getElementById('dayLogo').style.display = 'none';
          document.getElementById('nigthLogo').style.display = 'block';
          document.getElementById('mainContainer').className = 'nigth';
          document.getElementById('alert').className = 'nigth';
          document.querySelector('body').style.backgroundColor = '#2b2b2b'
        }"
      >
        <path
          d="M12 8a4 4 0 1 1-8 0 4 4 0 0 1 8 0zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"
        />
      </svg>
    </div>
    <div id="mainContainer" class="nigth">
      <h3 class="mb-3">Конвертировать сумму в текст</h3>
      <div class="input-group mb-3">
        <input
          type="text"
          class="form-control"
          placeholder="Введите сумму в рублях"
          aria-describedby="button-addon2"
          id="inputValue"
        />
        <button
          class="btn btn-outline-secondary"
          type="button"
          id="convertButton"
          onclick="{
            const inputValue = document.getElementById('inputValue').value;
            const result = document.getElementById('result');
            const copyStyle = document.getElementById('copy').style;
            document.getElementById('alert').style.display = 'none';
            if (!!inputValue) {
              result.style.display = 'block';
              copyStyle.display = 'block';
              const res = numToText(inputValue);
              result.innerHTML = res;
              console.log(res)
              if (res === 'ОШИБКА: введены невалидные данные' || res === 'ОШИБКА: слишком большое число') {
                copyStyle.display = 'none';
              }
            } else {
              result.style.display = 'none';
              copyStyle.display = 'none';
            }
          }"
        >
          Конвертировать
        </button>
      </div>
      <h5 id="result"></h5>
      <div class="d-grid gap-2 mt-3">
        <button
          id="copy"
          style="display: none"
          type="button"
          class="btn btn-outline-primary"
          onclick="{
            const result = document.getElementById('result').innerHTML;
            const alert = document.getElementById('alert');
            const alertIconOk = document.getElementById('alertOK');
            navigator.clipboard.writeText(result)
            .then(() => {
              console.log('Текст успешно скопирован')
              alert.style.display = 'flex';
              alertIconOk.display = 'block';
              $(function () {
                $('#alert').delay(1500).fadeOut(750);
              });
            })
            .catch(err => {
              console.error('Ошибка копирования: ', err);
              alert.style.backgroundColor = 'rgba(255, 0, 0, 0.26)';
              alert.innerHTML = 'Ошибка копирования';
              alertIconOk.display = 'none'
              alert.style.display = 'flex';
            })
          }"
        >
          Скопировать результат в буфер обмена
        </button>
        <a class="btn btn-outline-secondary" type="button" href="./tests.html">
          Тесты
        </a>
        <a
          class="btn btn-outline-secondary"
          type="button"
          href="https://github.com/igoromashov/numToText"
        >
          GitHub
        </a>
      </div>
    </div>
    <div id="alert" class="nigth">
      <svg
        id="alertOK"
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        fill="currentColor"
        class="bi bi-clipboard-check-fill"
        viewBox="0 0 16 16"
        style="margin-right: 30px"
      >
        <path
          d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"
        />
        <path
          d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"
        />
      </svg>
      Результат скопирован в буфер обмена
    </div>
  </body>
  <script>
    $("#inputValue").keyup(function (event) {
      if (event.keyCode == 13) {
        $("#convertButton").click();
        //$(this).val("");
      }
    });
  </script>
</html>
